<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grim Castle — Intro</title>
<style>
  :root{
    --brand-yellow:#ffd32a; /* McD-like vibe, not exact */
    --brand-red:#e53935;
    --brand-purple:#7a3bd1; /* shake color */
    --ink:#111;
    --bg:#fff8e6;
  }
  html,body{height:100%}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif;
    background: radial-gradient(120% 120% at 50% 0%, var(--bg) 0%, #fff 60%);
    color:var(--ink);
    -webkit-font-smoothing:antialiased;
  }
  .app{
    min-height:100%;
    display:flex; align-items:center; justify-content:center;
  }
  .frame{
    width:100%; max-width:560px; min-height:100dvh;
    display:flex; flex-direction:column; align-items:center; justify-content:space-between;
    padding:16px 14px 24px;
    box-sizing:border-box;
  }
  .brand{
    font-weight:800; letter-spacing:.3px;
    display:flex; gap:8px; align-items:center;
  }
  .brand .mark{
    width:26px; height:26px; border-radius:8px;
    background:
      linear-gradient(180deg, var(--brand-yellow), #ffc400);
    box-shadow:0 2px 0 rgba(0,0,0,.08) inset, 0 1px 4px rgba(0,0,0,.08);
    position:relative; overflow:hidden;
  }
  .brand .mark::after{
    content:""; position:absolute; inset:4px;
    border-radius:6px; background:var(--brand-red); transform:skewX(-10deg);
    mask: radial-gradient(8px 8px at 50% 85%, transparent 8px, #000 8px);
  }
  .panel{
    flex:1; width:100%; display:flex; align-items:center; justify-content:center;
    position:relative; text-align:center; padding:10px;
  }
  .card{
    width:100%; border-radius:18px; padding:22px 18px;
    background:#fff; box-shadow:0 10px 30px rgba(0,0,0,.08);
    display:flex; flex-direction:column; align-items:center; gap:14px;
    transform:translateY(10px); opacity:0; animation:pop .45s ease forwards;
  }
  .art{ width:110px; height:110px; }
  .line{
    font-size:1.15rem; line-height:1.35; font-weight:650;
  }
  .hint{ font-size:.9rem; opacity:.7 }
  .controls{
    display:flex; width:100%; justify-content:space-between; gap:10px; margin-top:8px;
  }
  button{
    appearance:none; border:none; border-radius:14px; padding:14px 16px;
    font-weight:750; font-size:1rem; cursor:pointer;
    box-shadow:0 6px 16px rgba(0,0,0,.09);
  }
  .ghost{ background:transparent; border:2px solid rgba(0,0,0,.1) }
  .primary{
    background:linear-gradient(180deg, var(--brand-yellow), #ffc400);
  }
  .progress{
    height:6px; width:100%; background:rgba(0,0,0,.06);
    border-radius:999px; overflow:hidden; margin:10px 0 0;
  }
  .bar{ height:100%; width:0%; background:var(--brand-red); transition:width .25s ease }

  @keyframes pop{ from{ transform:translateY(8px) scale(.98); opacity:0 } to{ transform:translateY(0) scale(1); opacity:1 } }
  @media (prefers-reduced-motion: reduce){
    .card{ animation:none; opacity:1; transform:none }
    .bar{ transition:none }
  }
</style>
</head>
<body>
<div class="app">
  <div class="frame" role="dialog" aria-label="Game intro">
    <div class="brand" aria-hidden="true">
      <div class="mark"></div><div>MONDOBITES</div>
    </div>

    <div class="panel">
      <div class="card" id="card">
        <svg class="art" viewBox="0 0 120 120" id="art" aria-hidden="true"></svg>
        <div class="line" id="line">…</div>
        <div class="hint" id="hint">Tap to continue</div>
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
      </div>
    </div>

    <div class="controls">
      <button class="ghost" id="skipBtn" aria-label="Skip intro">Skip</button>
      <button class="primary" id="nextBtn" aria-label="Next">Next</button>
    </div>
  </div>
</div>

<script>
/* Minimal, slide-based storyboard for the intro */
const $art = document.getElementById('art');
const $line = document.getElementById('line');
const $bar = document.getElementById('bar');
const $next = document.getElementById('nextBtn');
const $skip = document.getElementById('skipBtn');
const $card = document.getElementById('card');

const slides = [
  {
    text: "A little boy visits the world-famous burger place.",
    svg: burgerShop()
  },
  {
    text: "He buys a purple shake. Looks… legendary.",
    svg: shakeCup()
  },
  {
    text: "A few sips later—dizzy. He hurries home and crashes on the sofa.",
    svg: sofaNap()
  },
  {
    text: "He wakes up… in a cage under a strange castle.",
    svg: cageCastle()
  },
  {
    text: "Something glints on the floor. A screwdriver.",
    svg: screwdriver()
  },
  {
    text: "Escape starts now.",
    svg: startLock(),
    cta: "Start Game"
  }
];

let i = 0;
render(i);

function render(idx){
  const s = slides[idx];
  $art.innerHTML = s.svg;
  $line.textContent = s.text;
  $bar.style.width = ((idx+1)/slides.length*100).toFixed(1) + '%';
  $next.textContent = s.cta || "Next";
  // gentle re-pop animation
  $card.style.animation = 'none';
  void $card.offsetWidth; // reflow
  $card.style.animation = '';
}

function next(){
  if (i < slides.length - 1){
    i++; render(i);
  } else {
    startGame();
  }
}

function skip(){ i = slides.length - 1; render(i); }

function startGame(){
  // Replace with your real game bootstrapping
  // For now we just emit a custom event.
  document.dispatchEvent(new CustomEvent('game:start'));
  // Optionally hide intro:
  document.querySelector('.frame').innerHTML = `
    <div style="display:flex;min-height:100dvh;align-items:center;justify-content:center;flex-direction:column;gap:14px;">
      <div style="font-weight:800;font-size:1.3rem;">Game is starting…</div>
      <div style="opacity:.7">Hook this to your engine init.</div>
    </div>`;
}

// tap-friendly
$next.addEventListener('click', next);
$skip.addEventListener('click', skip);
document.addEventListener('keydown', (e)=>{
  if (e.key === 'Enter' || e.key === ' ') next();
  if (e.key === 'Escape') skip();
});
// allow tapping the card to continue
$card.addEventListener('click', (e)=>{
  // ignore button clicks inside
  if (e.target.tagName.toLowerCase() === 'button') return;
  next();
});

/* --- Tiny inline SVG makers (no assets needed) --- */
function burgerShop(){
  return `
  <defs>
    <linearGradient id="sun" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="var(--brand-yellow)"/>
      <stop offset="100%" stop-color="#ffc400"/>
    </linearGradient>
  </defs>
  <rect x="8" y="50" width="104" height="54" rx="10" fill="var(--brand-red)"/>
  <rect x="18" y="58" width="84" height="28" rx="6" fill="white" opacity=".9"/>
  <rect x="26" y="24" width="68" height="28" rx="6" fill="url(#sun)"/>
  <path d="M26 38h68" stroke="white" stroke-width="6" stroke-linecap="round"/>
  <circle cx="60" cy="84" r="6" fill="white"/>
  <circle cx="82" cy="84" r="6" fill="white"/>
  <rect x="14" y="92" width="92" height="8" rx="4" fill="white" opacity=".7"/>`;
}
function shakeCup(){
  return `
  <defs>
    <linearGradient id="shake" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#9b6cf0"/>
      <stop offset="100%" stop-color="var(--brand-purple)"/>
    </linearGradient>
  </defs>
  <rect x="46" y="18" width="28" height="10" rx="2" fill="#ccc"/>
  <rect x="58" y="10" width="4" height="20" rx="2" fill="#bbb"/>
  <path d="M40 30h40l-8 60H48L40 30z" fill="url(#shake)" stroke="#5a2bb0" stroke-width="2" />
  <rect x="36" y="26" width="48" height="8" rx="3" fill="#fff"/>
  <circle cx="60" cy="72" r="10" fill="rgba(255,255,255,.18)"/>`;
}
function sofaNap(){
  return `
  <rect x="16" y="46" width="88" height="40" rx="10" fill="#f06f6b"/>
  <rect x="10" y="70" width="100" height="18" rx="9" fill="#e04f4a"/>
  <rect x="24" y="58" width="20" height="16" rx="4" fill="#ffd9d7"/>
  <rect x="76" y="58" width="20" height="16" rx="4" fill="#ffd9d7"/>
  <path d="M30 30c8 0 12 10 18 10s10-8 18-8" stroke="#999" stroke-width="3" fill="none" opacity=".7"/>
  <text x="82" y="28" font-size="14" fill="#666">Z</text>
  <text x="92" y="22" font-size="10" fill="#666">z</text>`;
}
function cageCastle(){
  return `
  <rect x="14" y="20" width="92" height="80" rx="8" fill="#222"/>
  <rect x="18" y="24" width="84" height="72" rx="6" fill="#333"/>
  ${[22,34,46,58,70,82,94].map(x=>`<rect x="${x}" y="24" width="6" height="72" rx="3" fill="#0b0b0b"/>`).join('')}
  <path d="M20 24h80" stroke="#000" stroke-width="3"/>
  <path d="M30 16h60l-6 8H36z" fill="#444"/>
  <rect x="50" y="56" width="20" height="12" rx="3" fill="#666"/>
  <circle cx="60" cy="62" r="2" fill="#222"/>`;
}
function screwdriver(){
  return `
  <rect x="20" y="78" width="80" height="6" rx="3" fill="#d8a25a"/>
  <rect x="86" y="76" width="10" height="10" rx="2" fill="#8d5b1f"/>
  <rect x="18" y="78" width="10" height="6" rx="1" fill="#9ea6b1"/>
  <rect x="16" y="79" width="6" height="4" rx="1" fill="#bfc6d1"/>`;
}
function startLock(){
  return `
  <circle cx="60" cy="60" r="38" fill="var(--brand-yellow)" />
  <rect x="52" y="64" width="16" height="16" rx="3" fill="#333"/>
  <path d="M48 62v-8a12 12 0 0124 0v8" stroke="#333" stroke-width="6" fill="none" stroke-linecap="round"/>`;
}

/* Optional: expose the start hook */
document.addEventListener('game:start', ()=> {
  // console.log('Intro finished. Boot your game here.');
});
</script>
</body>
</html>
